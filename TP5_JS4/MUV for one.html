<!DOCTYPE html>
<html>
    <head>
        
        <script type="text/javascript">
            /**Les variables*/
            var ctxt;
            var max;
            var w = [undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined, undefined];
            var i;
            var colour = ["red", "green", "yellow", "blue", "purple", "brown", "white", "black", "orange", "pink"];
            
       
            /**Les fonctions*/
            function init() 
            {
                let can = document.getElementById("Extra");
                ctxt = can.getContext("2d");
                ctxt.fillStyle = "red";

                startWorker();
            }
            function drawCircle(response)
            {
                /**INITIALISATION*/
                let x = response.x;
                let y = response.y;

                /**On trace le cercle*/
                ctxt.clearRect(0, 0, 2000,2000);
                ctxt.beginPath();
                ctxt.arc(x, y, 5, 0, 2*Math.PI);
                ctxt.fill();
                ctxt.stroke();
            }
            function startWorker()
            {
                for (i=0; i<w.length; i++)
                {
                    if(typeof(w[i]) == "undefined")
                    {
                        w[i] = new Worker("Worker.js");
                    }
                    w[i].onmessage = function(event)
                    {
                        var reponse = event.data;
                        drawCircle(reponse);
                    }
                }
            }

            /**événements*/
            window.addEventListener("load",init);

       </script>

    </head>
    <body>
        <h1>
            Trypophobie
        </h1>
        <canvas id="Extra" width="600" height="600"></canvas>

    </body>
</html>